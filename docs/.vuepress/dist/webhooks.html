<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webhooks | Laravel Rave</title>
    <meta name="description" content="A rave by flutterwave laravel package to accept payment globally in multi currencies">
    
    
    <link rel="preload" href="/assets/css/0.styles.939f2eac.css" as="style"><link rel="preload" href="/assets/js/app.537004fa.js" as="script"><link rel="preload" href="/assets/js/12.d8b13066.js" as="script"><link rel="prefetch" href="/assets/js/5.18d1b03a.js"><link rel="prefetch" href="/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/assets/js/3.16641d78.js"><link rel="prefetch" href="/assets/js/4.ab13f73f.js"><link rel="prefetch" href="/assets/js/6.6a2ff07b.js"><link rel="prefetch" href="/assets/js/7.9b91c822.js"><link rel="prefetch" href="/assets/js/8.65ef0ff1.js"><link rel="prefetch" href="/assets/js/9.fcc5f213.js"><link rel="prefetch" href="/assets/js/10.65805966.js"><link rel="prefetch" href="/assets/js/11.21043e18.js">
    <link rel="stylesheet" href="/assets/css/0.styles.939f2eac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Laravel Rave</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/getting-started/installation.html" class="nav-link">Installation</a></div><div class="nav-item"><a href="/getting-started/payment-implementation.html" class="nav-link">Payment Implementation</a></div> <a href="https://github.com/kingflamez/laravelrave" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/getting-started/installation.html" class="nav-link">Installation</a></div><div class="nav-item"><a href="/getting-started/payment-implementation.html" class="nav-link">Payment Implementation</a></div> <a href="https://github.com/kingflamez/laravelrave" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>Implementations</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/getting-started/installation.html" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/getting-started/installation.html#prerequisite" class="sidebar-link">Prerequisite</a></li><li class="sidebar-sub-header"><a href="/getting-started/installation.html#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/getting-started/installation.html#usage" class="sidebar-link">Usage</a></li></ul></li><li><a href="/getting-started/payment-implementation.html" class="sidebar-link">Payment Implementation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/getting-started/payment-implementation.html#_1-setup-routes" class="sidebar-link">1. Setup Routes</a></li><li class="sidebar-sub-header"><a href="/getting-started/payment-implementation.html#_2-grant-csrf-access-to-rave-callback" class="sidebar-link">2. Grant CSRF Access to Rave Callback</a></li><li class="sidebar-sub-header"><a href="/getting-started/payment-implementation.html#_3-setup-your-controller" class="sidebar-link">3. Setup your Controller</a></li></ul></li><li><a href="/recurring/introduction.html" class="sidebar-link">Recurring Payments</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/recurring/introduction.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/recurring/introduction.html#form-values" class="sidebar-link">Form Values</a></li><li class="sidebar-sub-header"><a href="/recurring/introduction.html#sample-implementation" class="sidebar-link">Sample implementation</a></li><li class="sidebar-sub-header"><a href="/recurring/introduction.html#payment-plan-methods" class="sidebar-link">Payment Plan Methods</a></li><li class="sidebar-sub-header"><a href="/recurring/introduction.html#subscription-methods" class="sidebar-link">Subscription Methods</a></li><li class="sidebar-sub-header"><a href="/recurring/introduction.html#samples" class="sidebar-link">Samples</a></li></ul></li><li><a href="/webhooks.html" class="active sidebar-link">Webhooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webhooks.html#what-is-a-webhook" class="sidebar-link">What is a Webhook</a></li><li class="sidebar-sub-header"><a href="/webhooks.html#when-to-use-webhooks" class="sidebar-link">When to use webhooks</a></li><li class="sidebar-sub-header"><a href="/webhooks.html#sample-transaction-payload" class="sidebar-link">Sample Transaction Payload</a></li><li class="sidebar-sub-header"><a href="/webhooks.html#how-to-setup-webhooks-on-your-dashboard" class="sidebar-link">How to setup webhooks on your dashboard.</a></li><li class="sidebar-sub-header"><a href="/webhooks.html#receiving-a-webhook-notification" class="sidebar-link">Receiving a webhook notification</a></li><li class="sidebar-sub-header"><a href="/webhooks.html#best-practices" class="sidebar-link">Best practices</a></li></ul></li><li><a href="/verify-payment.html" class="sidebar-link">Verify Payment</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/verify-payment.html#verify-the-payment-with-rave" class="sidebar-link">Verify the payment with rave.</a></li><li class="sidebar-sub-header"><a href="/verify-payment.html#sample-implementation" class="sidebar-link">Sample Implementation</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Miscs</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="webhooks"><a href="#webhooks" aria-hidden="true" class="header-anchor">#</a> Webhooks</h1> <h2 id="what-is-a-webhook"><a href="#what-is-a-webhook" aria-hidden="true" class="header-anchor">#</a> What is a Webhook</h2> <p>A WebHook is an HTTP callback: an HTTP POST that occurs when something happens; a simple event-notification via HTTP POST. A web application implementing WebHooks will POST a message to a URL when certain things happen.</p> <p>Rave sends webhooks events that notify your application any time a payment event happens on your account. This is very useful for events - like getting paid via mobile money or USSD where the transaction is completed outside your application- Recurring billing where an API call is not needed for subsequent billings.</p> <p>In Rave you can setup webhooks that would let us notify you anytime events- A user on a subscription is charged, a customer completes a payment, we update a pending payment to successful- happen in your account.</p> <h2 id="when-to-use-webhooks"><a href="#when-to-use-webhooks" aria-hidden="true" class="header-anchor">#</a> When to use webhooks</h2> <p>Webhooks can be used for all kinds of payment methods, card, account, USSD, Mpesa, and Ghana Mobile money.</p> <p>If you use Rave to accept alternate payment methods like USSD, Mpesa, and Ghana mobile money, it is best practice to use webhooks so that your integration can be notified about changes the status of the payment once it is completed. This is because these payment methods are asynchronous and responses only come once the customer has completed the payment on their device.</p> <p>You might also use webhooks to:</p> <p>Update a customer's membership record in your database when a subscription payment succeeds.</p> <p>Email a customer when a subscription payment fails.</p> <p>Update your database when the status of a pending payment is updated to successful.</p> <p>NB: Not in all cases would you be able to rely completely on webhooks to get notified, an example is if your server is experiencing a downtime and your hook endpoints are affected, some customers might still be transacting independently of that and the hook call triggered would fail because your server was unreachable.</p> <p>In such cases we advise that developers set up a re-query service that goes to poll for the transaction status at regular intervals e.g. every hour using the Verify Payment endpoint, till a successful or failed response is returned.</p> <h2 id="sample-transaction-payload"><a href="#sample-transaction-payload" aria-hidden="true" class="header-anchor">#</a> Sample Transaction Payload</h2> <p>On Rave, Webhooks can be configured for transactions. When a transaction is completed, a POST HTTP request is sent to the URL you have configured. The HTTP payload will contain</p> <h3 id="_1-card-transaction-end-webhook-payload"><a href="#_1-card-transaction-end-webhook-payload" aria-hidden="true" class="header-anchor">#</a> 1. Card Transaction End Webhook Payload</h3> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">126122</span><span class="token punctuation">,</span>
  <span class="token property">&quot;txRef&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rave-pos-121775237991&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;flwRef&quot;</span><span class="token operator">:</span> <span class="token string">&quot;FLW-MOCK-72d0b2d66273fad0bb32fdea9f0fa298&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orderRef&quot;</span><span class="token operator">:</span> <span class="token string">&quot;URF_1523185223111_833935&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paymentPlan&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-04-08T11:00:23.000Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;charged_amount&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;successful&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;IP&quot;</span><span class="token operator">:</span> <span class="token string">&quot;197.149.95.62&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NGN&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;customer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">22836</span><span class="token punctuation">,</span>
    <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fullName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Anonymous customer&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;customertoken&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;salesmode@ravepay.co&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-04-08T11:00:22.000Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;updatedAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-04-08T11:00:22.000Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;deletedAt&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;AccountId&quot;</span><span class="token operator">:</span> <span class="token number">134</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;entity&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;card6&quot;</span><span class="token operator">:</span> <span class="token string">&quot;539983&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;card_last4&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8381&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_2-account-transaction-end-webhook-payload"><a href="#_2-account-transaction-end-webhook-payload" aria-hidden="true" class="header-anchor">#</a> 2. Account Transaction End Webhook Payload</h3> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">125837</span><span class="token punctuation">,</span>
  <span class="token property">&quot;txRef&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rave-pos-272519815315&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;flwRef&quot;</span><span class="token operator">:</span> <span class="token string">&quot;FLWACHMOCK-1523118279396&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orderRef&quot;</span><span class="token operator">:</span> <span class="token string">&quot;URF_1523118277202_7343035&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paymentPlan&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-04-07T16:24:37.000Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  <span class="token property">&quot;charged_amount&quot;</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;successful&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;IP&quot;</span><span class="token operator">:</span> <span class="token string">&quot;197.149.95.62&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NGN&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;customer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">5766</span><span class="token punctuation">,</span>
    <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;N/A&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fullName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Anonymous customer&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;customertoken&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;salesmode@ravepay.co&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2017-10-16T10:03:19.000Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;updatedAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2017-10-16T10:03:19.000Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;deletedAt&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;AccountId&quot;</span><span class="token operator">:</span> <span class="token number">134</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;entity&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;account_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0690000037&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Dele Moruf&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Quadri&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="_3-ghana-mobile-money-end-webhook-payload"><a href="#_3-ghana-mobile-money-end-webhook-payload" aria-hidden="true" class="header-anchor">#</a> 3. Ghana Mobile Money End Webhook Payload</h3> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">126090</span><span class="token punctuation">,</span>
  <span class="token property">&quot;txRef&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rave-checkout-1523183226335&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;flwRef&quot;</span><span class="token operator">:</span> <span class="token string">&quot;flwm3s4m0c1523183355860&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orderRef&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paymentPlan&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-04-08T10:29:15.000Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;charged_amount&quot;</span><span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;successful&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;IP&quot;</span><span class="token operator">:</span> <span class="token string">&quot;197.149.95.62&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GHS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;customer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">22823</span><span class="token punctuation">,</span>
    <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0578922930&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fullName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Anonymous Customer&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;customertoken&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;user@example.com&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-04-08T10:28:01.000Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;updatedAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-04-08T10:28:01.000Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;deletedAt&quot;</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;AccountId&quot;</span><span class="token operator">:</span> <span class="token number">134</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;entity&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NO-ENTITY&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="how-to-setup-webhooks-on-your-dashboard"><a href="#how-to-setup-webhooks-on-your-dashboard" aria-hidden="true" class="header-anchor">#</a> How to setup webhooks on your dashboard.</h2> <img src="https://files.readme.io/6fc5add-Screenshot_2018-01-19_11.45.24.png" style="margin: 0 auto;"> <p style="text-align: center">Login to you Rave dashboard then click on settings , on the setting page navigate to webhooks to add a webhook.</p> <img src="https://files.readme.io/6bda58d-Screenshot_2018-04-07_16.24.27.png" style="margin: 0 auto;"> <p style="text-align: center">Once on the webhook page, click the input text to add your webhook and use the save action button to save it.</p> <h2 id="receiving-a-webhook-notification"><a href="#receiving-a-webhook-notification" aria-hidden="true" class="header-anchor">#</a> Receiving a webhook notification</h2> <h3 id="_1-add-your-webhook-secret-hash-to-your-env"><a href="#_1-add-your-webhook-secret-hash-to-your-env" aria-hidden="true" class="header-anchor">#</a> 1. Add your webhook secret hash to your <code>.env</code></h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>RAVE_PUBLIC_KEY<span class="token operator">=</span>FLWPUBK-xxxxxxxxxxxxxxxxxxxxx-X
RAVE_SECRET_KEY<span class="token operator">=</span>FLWSECK-xxxxxxxxxxxxxxxxxxxxx-X
RAVE_ENVIRONMENT<span class="token operator">=</span><span class="token string">&quot;staging&quot;</span>
RAVE_SECRET_HASH<span class="token operator">=</span><span class="token string">'MY_POTTY_PATTY'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-setup-routes"><a href="#_2-setup-routes" aria-hidden="true" class="header-anchor">#</a> 2. Setup Routes</h3> <div class="language-php line-numbers-mode"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/receivepayment'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'RaveController@webhook'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'webhook'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-grant-csrf-access-to-rave-webhook"><a href="#_3-grant-csrf-access-to-rave-webhook" aria-hidden="true" class="header-anchor">#</a> 3. Grant CSRF Access to Rave Webhook</h3> <p>Go to <code>app/Http/Middleware/VerifyCsrfToken.php</code> and add your webhook url to the <code>$except</code> array</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">protected</span> <span class="token variable">$except</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'rave/callback'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'rave/receivepayment'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-setup-your-controller"><a href="#_4-setup-your-controller" aria-hidden="true" class="header-anchor">#</a> 4. Setup your Controller</h3> <blockquote><p>Setup your controller to handle the routes. I created the <code>RaveController</code>. Use the <code>Rave</code>
facade.</p></blockquote> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token comment">//use the Rave Facade</span>
<span class="token keyword">use</span> <span class="token package">Rave</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">RaveController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>

  <span class="token comment">/**
   * Receives Rave webhook
   * @return void
   */</span>
  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">webhook</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">//This receives the webhook</span>
    <span class="token variable">$data</span> <span class="token operator">=</span> Rave<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">receiveWebhook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="best-practices"><a href="#best-practices" aria-hidden="true" class="header-anchor">#</a> Best practices</h2> <p>If your webhook script performs complex logic, or makes network calls, it's possible that the script would time out before rave sees its complete execution. For that reason, you might want to have your webhook endpoint immediately acknowledge receipt by returning a 2xx HTTP status code, and then perform the rest of its duties.</p> <p>Webhook endpoints might occasionally receive the same event more than once. We advise you to guard against duplicated event receipts by making your event processing <a href="https://en.wikipedia.org/wiki/Idempotence" target="_blank" rel="noopener noreferrer">idempotent<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. One way of doing this is logging the events you've processed, and then checking if the status has changed before processing the identical event. Additionally, we recommend <a href="/verify-payment.html">verifying webhook signatures</a> to confirm that received events are being sent from rave.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/kingflamez/kingflamez.github.io/edit/master/laravelrave/webhooks.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/recurring/introduction.html" class="prev">
          Recurring Payments
        </a></span> <span class="next"><a href="/verify-payment.html">
          Verify Payment
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/12.d8b13066.js" defer></script><script src="/assets/js/app.537004fa.js" defer></script>
  </body>
</html>
